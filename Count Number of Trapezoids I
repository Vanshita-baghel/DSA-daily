PROBLEM STATEMENT:
You are given a 2D integer array points, where points[i] = [xi, yi] represents the coordinates of the ith point on the Cartesian plane.

A horizontal trapezoid is a convex quadrilateral with at least one pair of horizontal sides (i.e. parallel to the x-axis). Two lines are parallel if and only if they have the same slope.

Return the number of unique horizontal trapezoids that can be formed by choosing any four distinct points from points.

Since the answer may be very large, return it modulo 109 + 7.

SOLUTION:

                                                                        TIME COMPLEXITY: O(n logn)
                                                                        SPACE COMPLEXITY: O(n)

class Solution {
    int MOD= 1_000_000_007;
    public int countTrapezoids(int[][] points) {
        //1.store the points on each level
        //2. calculate edges on each level
        //3. ans= ans+ (edges on current level+ prefixSum)

        int maxLevel=0;
        HashMap<Integer, Integer> mp= new HashMap<>();  //level, points
        for(int i=0; i<points.length; i++){
            int level= points[i][1];
            mp.put(level, mp.getOrDefault(level,0)+1);
            maxLevel= Math.max(maxLevel, level);
        }
        //2.
        List<long[] > levels= new ArrayList<>();
        for(var e: mp.entrySet()){
            int k= e.getValue();
            if(k>=2){
                long edges= ((long)k*(k-1))/2l;
                levels.add(new long[]{e.getKey(), edges});
            }
        }

        levels.sort((a,b)->Long.compare(a[0], b[0]));
        //3.
        long prefixSum=0l;
        long ans=0;
        for(var lvl: levels){
            long curEdges= lvl[1];
            ans= (ans+(curEdges*prefixSum)%MOD)%MOD;
            prefixSum= (prefixSum+curEdges)%MOD;
        }
        return (int)ans;
    }
}
